@using HomeOrganizer.Components
@using HomeOrganizer.Components.Dialogs;
@using HomeOrganizer.Components.Errors
@using HomeOrganizer.Components.Features;
@using HomeOrganizer.Models.Bases;
@using HomeOrganizer.Models.Features;
@using HomeOrganizer.Models.User;
@using MudBlazor.Services;
@using MyWebsiteBlazor.Data.Database;
@using System.Reflection;

@inject UserService userService
@inject IDialogService DialogService
@inject NavigationManager navigationManager

@page "/UserPanel"
<PageTitle> Home Organizer </PageTitle>

@if (user == null)
{
    <UserPanelError />
}
else
{
    <MudPaper Class="d-flex justify-center flex-grow-1 gap-4 mud-theme-transparent" Elevation="0">
        <MudPaper Width="600px" Height="600px" Class="pa-4 mt-16">

            <MudText Typo="Typo.h4" Align="Align.Center">
                User panel
            </MudText>

            <MudGrid>
                <MudItem xs="12" sm="3">
                    <MudImage Width="100" Height="100"
                          Src="images/DefaultUser.png" Alt="User profile avatar"
                          Elevation="25" Class="rounded-lg" />
                </MudItem>
                <MudItem xs="12" sm="9">
                    <MudText Typo="Typo.h6" Align="Align.Start">
                        @user.Credentials.Login
                    </MudText>
                </MudItem>
                <MudItem xs="12">
                    <MudText>
                        Name: @user.Name
                    </MudText>
                </MudItem>
                <MudItem xs="12">
                    <MudText>
                        Email: @user.Email
                    </MudText>
                </MudItem>
            </MudGrid>
        </MudPaper>
    </MudPaper>
}


@code {
    UserData? user = null;

    protected override void OnInitialized()
    {
        user = userService.LoggedUser;
        if (user == null) return;
        base.OnInitialized();
    }

    private void GoHome()
    {
        navigationManager.NavigateTo("/");
    }
}
