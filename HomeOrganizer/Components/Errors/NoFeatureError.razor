@using HomeOrganizer.Models.User;
@inject UserService userService

@if (user == null || user.OpenedFeature == null)
{
    return;
}

<MudStack AlignItems="AlignItems.Center" Justify="Justify.FlexStart" Style="height:100%; width:100%;" Spacing="0">

    <MudPaper Width="500px" Class="pa-4 mt-16">
        <MudText Typo="Typo.h6">
            Whoops... Something went really really wrong!
        </MudText>

        <MudText Typo="Typo.body1" Class="mt-3">
            Cannot find feature '@user.OpenedFeature.FeatureData.Name', maybe it is under production?
        </MudText>

        <MudPaper Class="d-flex justify-center flex-grow-1 gap-4 mud-theme-transparent mt-10" Elevation="0">
            <MudButton OnClick="ClearOpenedFeature" Variant="Variant.Outlined" StartIcon="@Icons.Material.Filled.KeyboardBackspace">
                Back home
            </MudButton>
        </MudPaper>
    </MudPaper>

</MudStack>

@code {
    UserData? user = null;

    protected override void OnInitialized()
    {
        user = userService.LoggedUser;
    }

    private void ClearOpenedFeature()
    {
        user.OpenedFeature = null;
        userService.LoggedUser = user;
    }
}